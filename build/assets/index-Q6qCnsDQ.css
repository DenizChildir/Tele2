*{margin:0;padding:0;box-sizing:border-box}:root{--primary: #2563eb;--primary-hover: #1d4ed8;--danger: #dc2626;--danger-hover: #b91c1c;--success: #16a34a;--warning: #f59e0b;--gray-50: #f9fafb;--gray-100: #f3f4f6;--gray-200: #e5e7eb;--gray-300: #d1d5db;--gray-400: #9ca3af;--gray-500: #6b7280;--gray-600: #4b5563;--gray-700: #374151;--gray-800: #1f2937;--gray-900: #111827;--space-xs: .25rem;--space-sm: .5rem;--space-md: 1rem;--space-lg: 1.5rem;--space-xl: 2rem;--radius-sm: .25rem;--radius-md: .5rem;--radius-lg: .75rem;--radius-full: 9999px;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px rgba(0, 0, 0, .07);--shadow-lg: 0 10px 15px rgba(0, 0, 0, .1)}body{font-family:system-ui,-apple-system,sans-serif;font-size:16px;line-height:1.5;color:var(--gray-900);background-color:var(--gray-50)}.app-container{display:grid;grid-template-rows:auto 1fr;min-height:100vh;max-width:100%}.app-header{display:grid;grid-template-columns:1fr auto;align-items:center;padding:var(--space-md) var(--space-lg);background:#fff;border-bottom:1px solid var(--gray-200);box-shadow:var(--shadow-sm)}.app-header-actions{display:flex;align-items:center;gap:var(--space-md)}.app-unread-badge{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--danger);color:#fff;border-radius:var(--radius-full);font-size:.875rem;font-weight:600;animation:pulse 2s ease-in-out infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.8}}.app-unread-icon{font-size:1rem}.app-unread-count{min-width:20px;text-align:center}.app-main{display:grid;place-items:center;padding:var(--space-lg)}.card{background:#fff;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);padding:var(--space-xl);width:100%;max-width:600px}.card-title{font-size:1.5rem;font-weight:600;color:var(--gray-900);margin-bottom:var(--space-lg);text-align:center}.form{display:grid;gap:var(--space-md)}.form-group{display:grid;gap:var(--space-xs)}.form-label{font-size:.875rem;font-weight:500;color:var(--gray-700)}.input{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--gray-300);border-radius:var(--radius-md);font-size:1rem;transition:all .2s}.input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #2563eb1a}.input:disabled{background-color:var(--gray-100);cursor:not-allowed}.btn{padding:var(--space-sm) var(--space-lg);border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;display:inline-grid;place-items:center}.btn:disabled{opacity:.5;cursor:not-allowed}.btn-primary{background-color:var(--primary);color:#fff}.btn-primary:hover:not(:disabled){background-color:var(--primary-hover)}.btn-secondary{background-color:var(--gray-200);color:var(--gray-700)}.btn-secondary:hover:not(:disabled){background-color:var(--gray-300)}.btn-danger{background-color:var(--danger);color:#fff}.btn-danger:hover:not(:disabled){background-color:var(--danger-hover)}.btn-icon{padding:var(--space-sm);background:transparent;color:var(--gray-600);font-size:1.25rem}.btn-icon:hover:not(:disabled){background-color:var(--gray-100)}.btn-group{display:grid;grid-auto-flow:column;gap:var(--space-sm)}.chat-container{display:grid;grid-template-rows:auto 1fr auto;height:calc(100vh - 4rem);max-width:1200px;margin:0 auto;background:#fff;border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);overflow:hidden;position:relative}.chat-header{display:grid;grid-template-columns:1fr auto;align-items:center;padding:var(--space-md) var(--space-lg);background:var(--gray-50);border-bottom:1px solid var(--gray-200)}.chat-header-left{display:flex;align-items:center;gap:var(--space-md)}.chat-user-info{display:grid;grid-auto-flow:column;align-items:center;gap:var(--space-md)}.chat-messages{padding:var(--space-lg);overflow-y:auto;background:var(--gray-50);display:grid;gap:var(--space-md);align-content:start}.chat-input-area{padding:var(--space-lg);background:#fff;border-top:1px solid var(--gray-200)}.chat-input-form{display:grid;grid-template-columns:auto 1fr auto;gap:var(--space-sm);align-items:center}.contact-switcher{position:absolute;top:0;left:0;bottom:0;width:320px;background:#fff;border-right:1px solid var(--gray-200);box-shadow:var(--shadow-lg);z-index:100;display:grid;grid-template-rows:auto 1fr;animation:slideIn .2s ease-out}@keyframes slideIn{0%{transform:translate(-100%)}to{transform:translate(0)}}.contact-switcher-header{display:flex;justify-content:space-between;align-items:center;padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--gray-200);background:var(--gray-50)}.contact-switcher-header h3{margin:0;font-size:1.25rem;font-weight:600;color:var(--gray-900)}.contact-switcher-list{overflow-y:auto;background:#fff}.contact-switcher-empty{padding:var(--space-xl)}.contact-switcher-item{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);cursor:pointer;transition:background-color .2s;border-bottom:1px solid var(--gray-100)}.contact-switcher-item:hover{background-color:var(--gray-50)}.contact-switcher-item-active{background-color:var(--primary);color:#fff}.contact-switcher-item-active:hover{background-color:var(--primary-hover)}.contact-switcher-item-main{flex:1;display:flex;justify-content:space-between;align-items:center;gap:var(--space-sm);overflow:hidden}.contact-switcher-item-header{display:flex;align-items:center;gap:var(--space-sm);flex:1;overflow:hidden}.contact-switcher-item-name{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.contact-switcher-item-active .contact-switcher-item-name{color:#fff}.contact-switcher-item-time{font-size:.75rem;color:var(--gray-500);white-space:nowrap}.contact-switcher-item-active .contact-switcher-item-time{color:#fffc}.contact-switcher-unread-badge{min-width:20px;height:20px;padding:0 var(--space-xs);background:var(--danger);color:#fff;border-radius:var(--radius-full);font-size:.75rem;font-weight:600;display:flex;align-items:center;justify-content:center;margin-left:var(--space-sm)}.contact-switcher-toggle{background:var(--gray-100);border-radius:var(--radius-md);padding:var(--space-sm);transition:all .2s}.contact-switcher-toggle:hover{background:var(--gray-200)}.contact-switcher-icon{font-size:1.25rem}.contact-switcher-list::-webkit-scrollbar{width:6px}.contact-switcher-list::-webkit-scrollbar-track{background:transparent}.contact-switcher-list::-webkit-scrollbar-thumb{background:var(--gray-300);border-radius:var(--radius-full)}.contact-switcher-list::-webkit-scrollbar-thumb:hover{background:var(--gray-400)}.message{display:grid;justify-items:start;gap:var(--space-xs);position:relative}.message-outgoing{justify-items:end}.message-bubble{max-width:70%;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);position:relative}.message-bubble-incoming{background:#fff;color:var(--gray-900);box-shadow:var(--shadow-sm)}.message-bubble-outgoing{background:var(--primary);color:#fff}.message-meta{display:grid;grid-auto-flow:column;gap:var(--space-xs);align-items:center;font-size:.75rem;color:var(--gray-500)}.message-outgoing .message-meta{color:var(--gray-400)}.message-status{font-size:.875rem}.user-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--space-sm);margin-top:var(--space-md)}.user-card{padding:var(--space-md);background:var(--gray-50);border:1px solid var(--gray-200);border-radius:var(--radius-md);text-align:center;cursor:pointer;transition:all .2s}.user-card:hover,.user-card-active{background:var(--primary);color:#fff;border-color:var(--primary)}.status{display:inline-grid;grid-auto-flow:column;align-items:center;gap:var(--space-xs);font-size:.875rem}.status-dot{width:8px;height:8px;border-radius:var(--radius-full)}.status-online{background:var(--success)}.status-away{background:var(--warning)}.status-offline{background:var(--gray-400)}.file-preview{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:var(--space-sm);padding:var(--space-sm);background:var(--gray-100);border-radius:var(--radius-md)}.file-icon{font-size:1.5rem}.file-info{display:grid;gap:2px}.file-name{font-size:.875rem;font-weight:500;color:var(--gray-700);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-size{font-size:.75rem;color:var(--gray-500)}.file-sent-label{font-size:.75rem;color:var(--gray-500);font-style:italic}.file-auto-download-notice{font-size:.75rem;color:var(--success);padding:var(--space-xs) var(--space-sm);margin-top:var(--space-xs);background:#16a34a1a;border-radius:var(--radius-sm);text-align:center}.message-bubble-outgoing .file-auto-download-notice{background:#ffffff1a;color:#fffc}.alert{padding:var(--space-md);border-radius:var(--radius-md);margin-bottom:var(--space-md);display:grid;grid-template-columns:auto 1fr;gap:var(--space-sm);align-items:start}.alert-error{background:#fee;color:var(--danger);border:1px solid #fcc}.alert-success{background:#efe;color:var(--success);border:1px solid #cfc}.alert-warning{background:#ffeaa7;color:var(--warning);border:1px solid #fdcb6e}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:grid;place-items:center;z-index:1000}.modal{background:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.text-center{text-align:center}.text-muted{color:var(--gray-500)}.text-small{font-size:.875rem}.mt-sm{margin-top:var(--space-sm)}.mt-md{margin-top:var(--space-md)}.mt-lg{margin-top:var(--space-lg)}.mb-sm{margin-bottom:var(--space-sm)}.mb-md{margin-bottom:var(--space-md)}.mb-lg{margin-bottom:var(--space-lg)}.ml-2{margin-left:.5rem}.gap-sm{gap:var(--space-sm)}.gap-md{gap:var(--space-md)}.gap-lg{gap:var(--space-lg)}.hidden{display:none!important}.spinner{width:24px;height:24px;border:3px solid var(--gray-300);border-top-color:var(--primary);border-radius:var(--radius-full);animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.fade-in{animation:fadeIn .3s ease-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.user-menu-compact{display:grid;grid-auto-flow:column;align-items:center;gap:var(--space-lg)}.data-manager{max-width:600px;width:100%}.config-button{position:fixed;top:var(--space-md);right:var(--space-md);z-index:100;width:48px;height:48px;border-radius:var(--radius-full);background:#fff;box-shadow:var(--shadow-md);border:none;cursor:pointer;font-size:1.5rem;display:grid;place-items:center;transition:transform .2s}.config-button:hover{transform:scale(1.05)}.chat-messages::-webkit-scrollbar{width:6px}.chat-messages::-webkit-scrollbar-track{background:transparent}.chat-messages::-webkit-scrollbar-thumb{background:var(--gray-300);border-radius:var(--radius-full)}.chat-messages::-webkit-scrollbar-thumb:hover{background:var(--gray-400)}.empty-state{text-align:center;padding:var(--space-xl);color:var(--gray-500)}.empty-state-icon{font-size:3rem;margin-bottom:var(--space-md);opacity:.3}.file-preview-container{max-width:300px;border-radius:var(--radius-md);overflow:hidden;background:var(--gray-50);border:1px solid var(--gray-200)}.file-preview-loading,.file-preview-error{padding:var(--space-lg);text-align:center;color:var(--gray-600);display:flex;align-items:center;gap:var(--space-sm);justify-content:center}.file-preview-error{color:var(--danger)}.file-preview-image{position:relative;background:var(--gray-900);display:flex;align-items:center;justify-content:center;min-height:150px;max-height:400px}.file-preview-image img{max-width:100%;max-height:400px;display:block;cursor:pointer;transition:opacity .2s}.file-preview-image img:hover{opacity:.9}.file-preview-video{background:var(--gray-900);position:relative}.file-preview-video video{width:100%;max-height:400px;display:block}.file-preview-audio{padding:var(--space-lg);background:linear-gradient(135deg,var(--gray-100),var(--gray-50));display:flex;flex-direction:column;align-items:center;gap:var(--space-md)}.file-preview-audio .audio-icon{font-size:3rem;opacity:.8}.file-preview-audio audio{width:100%;max-width:250px}.file-preview-generic{padding:var(--space-lg);display:flex;flex-direction:column;align-items:center;gap:var(--space-md);text-align:center}.file-preview-generic .file-icon{font-size:3rem;opacity:.8}.file-preview-generic .file-details{display:flex;flex-direction:column;gap:var(--space-xs)}.file-preview-info{padding:var(--space-sm) var(--space-md);background:#fff;border-top:1px solid var(--gray-200);display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem}.file-preview-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500;color:var(--gray-700)}.file-preview-size{color:var(--gray-500);white-space:nowrap}.file-preview-download{padding:var(--space-xs) var(--space-sm);background:var(--primary);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;cursor:pointer;transition:background .2s;white-space:nowrap}.file-preview-download:hover{background:var(--primary-hover)}.file-preview-download-large{padding:var(--space-sm) var(--space-lg);background:var(--primary);color:#fff;border:none;border-radius:var(--radius-md);font-size:.875rem;cursor:pointer;transition:background .2s;font-weight:500}.file-preview-download-large:hover{background:var(--primary-hover)}.message-bubble .file-preview-container{margin:calc(var(--space-sm) * -1)}.message-bubble-outgoing .file-preview-container{border:1px solid rgba(255,255,255,.2)}.message-bubble-outgoing .file-preview-info{background:#ffffff1a;border-top:1px solid rgba(255,255,255,.2)}.message-bubble-outgoing .file-preview-name{color:#ffffffe6}.message-bubble-outgoing .file-preview-size{color:#ffffffb3}.message-bubble-outgoing .file-preview-download{background:#fff3}.message-bubble-outgoing .file-preview-download:hover{background:#ffffff4d}.reply-context{padding:var(--space-sm);margin-bottom:var(--space-xs);background:var(--gray-100);border-left:3px solid var(--primary);border-radius:var(--radius-sm);font-size:.875rem;cursor:pointer;transition:background .2s}.reply-context:hover{background:var(--gray-200)}.message-bubble-outgoing .reply-context{background:#ffffff26;border-left-color:#fffc}.message-bubble-outgoing .reply-context:hover{background:#ffffff40}.reply-context-header{font-weight:600;color:var(--primary);margin-bottom:2px}.message-bubble-outgoing .reply-context-header{color:#ffffffe6}.reply-context-content{color:var(--gray-700);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px}.message-bubble-outgoing .reply-context-content{color:#fffc}.reply-context-file{display:flex;align-items:center;gap:var(--space-xs)}.reply-context-file-icon{font-size:1rem}.message-actions{position:absolute;top:-30px;right:0;display:none;background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-md);padding:var(--space-xs)}.message:hover .message-actions{display:block}.message-outgoing .message-actions{left:0;right:auto}.reply-button{padding:var(--space-xs) var(--space-sm);background:transparent;border:none;border-radius:var(--radius-sm);cursor:pointer;font-size:.875rem;color:var(--gray-600);transition:all .2s;display:flex;align-items:center;gap:var(--space-xs)}.reply-button:hover{background:var(--gray-100);color:var(--primary)}.reply-input-bar{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm) var(--space-md);background:var(--gray-100);border-radius:var(--radius-md);margin-bottom:var(--space-sm);font-size:.875rem}.reply-input-content{display:flex;align-items:center;gap:var(--space-sm);flex:1;overflow:hidden}.reply-input-text{color:var(--gray-700);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reply-input-user{font-weight:600;color:var(--primary)}.reply-cancel-button{padding:var(--space-xs);background:transparent;border:none;border-radius:var(--radius-sm);cursor:pointer;color:var(--gray-500);transition:all .2s;font-size:1.25rem;line-height:1}.reply-cancel-button:hover{background:var(--gray-200);color:var(--gray-700)}.reply-thread-line{position:absolute;left:-20px;top:0;bottom:0;width:2px;background:var(--gray-300);opacity:0;transition:opacity .2s}.message.reply-highlighted .reply-thread-line{opacity:1;background:var(--primary)}@keyframes highlightReply{0%{background-color:transparent}50%{background-color:#2563eb1a}to{background-color:transparent}}.message.reply-highlighted{animation:highlightReply 1.5s ease-out}@media (max-width: 768px){.reply-context{font-size:.8rem;padding:var(--space-xs)}.reply-context-content{max-width:200px}.message-actions{top:-25px;padding:2px}.reply-button{font-size:.8rem;padding:2px var(--space-xs)}.reply-input-bar{font-size:.8rem;padding:var(--space-xs) var(--space-sm)}}@media (max-width: 768px){.app-header{padding:var(--space-sm) var(--space-md)}.chat-container{height:100vh;border-radius:0}.card{max-width:100%;margin:0 var(--space-md)}.message-bubble{max-width:85%}.user-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.config-button{top:var(--space-sm);right:var(--space-sm);width:40px;height:40px;font-size:1.2rem}.modal{width:95%;padding:var(--space-lg)}.user-menu-compact{grid-auto-flow:row;gap:var(--space-sm);font-size:.875rem}.file-preview-container{max-width:250px}.contact-switcher{width:280px;box-shadow:var(--shadow-lg)}.contact-switcher-header,.contact-switcher-item{padding:var(--space-sm) var(--space-md)}.chat-header-left{flex:1;min-width:0}.chat-user-info{min-width:0;overflow:hidden}.chat-user-info>span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}@media print{.app-header,.chat-input-area,.config-button,.btn{display:none!important}.chat-container{box-shadow:none;height:auto}.chat-messages{overflow:visible}}
